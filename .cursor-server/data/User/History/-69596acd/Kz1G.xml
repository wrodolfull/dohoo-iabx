<?xml version="1.0" encoding="utf-8"?>
<configuration name="verto.conf" description="HTML5 Verto WebRTC Endpoint">
  <settings>
    <!-- Enable JSON-RPC over WebSocket -->
    <param name="bind-local" value="0.0.0.0:8081"/>
    <param name="bind-secure" value="0.0.0.0:8082"/>
    <!-- <param name="force-register-domain" value="$${domain}"/> -->
    <!-- <param name="secure-combined" value="$${certs_dir}/wss.pem"/> -->
    <!-- <param name="secure-chain" value="$${certs_dir}/wss.pem"/> -->
    <!-- Configurações de certificado SSL -->
    <param name="secure-cert" value="$${certs_dir}/wss.pem"/>
    <param name="secure-key" value="$${certs_dir}/wss.pem"/>
    <param name="secure-only" value="false"/>
    <!-- Configurações DTLS para WebRTC -->
    <param name="dtls-cert" value="$${certs_dir}/dtls-srtp.pem"/>
    <param name="dtls-key" value="$${certs_dir}/dtls-srtp.pem"/>
    <!-- Configurações STUN -->
    <param name="stun-set" value="stun.freeswitch.org"/>
    <param name="stun-ping" value="25"/>
    <!-- Configurações de vídeo -->
    <param name="enable-video" value="true"/>
    <!-- Configurações de áudio -->
    <param name="codec-prefs" value="OPUS,G722,PCMU,PCMA,GSM"/>
    <!-- Configurações de autenticação -->
    <param name="auth-calls" value="true"/>
    <!-- Configurações de debug -->
    <param name="debug" value="10"/>
    <!-- Configurações de heartbeat -->
    <param name="heartbeat-interval" value="30"/>
    <!-- Configurações de sessão -->
    <param name="session-timeout" value="60"/>
    <!-- Configurações de CORS -->
    <param name="cors" value="true"/>
    <!-- Configurações JSON-RPC -->
    <param name="jsonrpc-allowed-methods" value="verto,jsapi"/>
    <param name="jsonrpc-allowed-event-channels" value="demo,conference,presence"/>
    <!-- Configurações de presence -->
    <param name="enable-presence" value="true"/>
    <!-- Configurações de conferência -->
    <param name="enable-conference" value="true"/>
    <!-- Configurações de áudio 3D -->
    <param name="enable-3d-audio" value="true"/>
  </settings>

  <profiles>
    <!-- Perfil padrão para WebRTC -->
    <profile name="default">
      <param name="bind-local" value="0.0.0.0:8081"/>
      <param name="bind-secure" value="0.0.0.0:8082"/>
      <param name="userauth" value="true"/>
      <param name="context" value="default"/>
      <param name="dialplan" value="XML"/>
      <param name="secure-cert" value="$${certs_dir}/wss.pem"/>
      <param name="secure-key" value="$${certs_dir}/wss.pem"/>
      <param name="dtls-cert" value="$${certs_dir}/dtls-srtp.pem"/>
      <param name="dtls-key" value="$${certs_dir}/dtls-srtp.pem"/>
      <!-- RTP settings -->
      <param name="rtp-ip" value="$${bind_server_ip}"/>
      <param name="ext-rtp-ip" value="auto-nat"/>
      <param name="rtp-port-min" value="16384"/>
      <param name="rtp-port-max" value="32768"/>
      <!-- Timer settings -->
      <param name="timer-name" value="soft"/>
      <!-- Codec settings -->
      <param name="codec-prefs" value="OPUS,G722,PCMU,PCMA"/>
      <param name="inbound-codec-prefs" value="OPUS,G722,PCMU,PCMA"/>
      <param name="inbound-codec-negotiation" value="generous"/>
      <!-- VAD settings -->
      <param name="enable-vad" value="true"/>
      <!-- Conferência settings -->
      <param name="enable-conference" value="true"/>
      <!-- Presence settings -->
      <param name="enable-presence" value="true"/>
      <!-- Recording settings -->
      <param name="record-template" value="$${recordings_dir}/${domain_name}/archive/${strftime(%Y-%m-%d-%H-%M-%S)}_${destination_number}_${caller_id_number}_${uuid}.wav"/>
      <!-- STUN server settings -->
      <param name="apply-inbound-acl" value="domains"/>
      <param name="local-network-acl" value="localnet.auto"/>
      <param name="outbound-codec-prefs" value="OPUS,G722,PCMU,PCMA"/>
    </profile>

    <!-- Perfil para Call Center -->
    <profile name="callcenter">
      <param name="bind-local" value="0.0.0.0:8083"/>
      <param name="bind-secure" value="0.0.0.0:8084"/>
      <param name="userauth" value="true"/>
      <param name="context" value="callcenter"/>
      <param name="dialplan" value="XML"/>
      <param name="secure-cert" value="$${certs_dir}/wss.pem"/>
      <param name="secure-key" value="$${certs_dir}/wss.pem"/>
      <param name="dtls-cert" value="$${certs_dir}/dtls-srtp.pem"/>
      <param name="dtls-key" value="$${certs_dir}/dtls-srtp.pem"/>
      <!-- RTP settings -->
      <param name="rtp-ip" value="$${bind_server_ip}"/>
      <param name="ext-rtp-ip" value="auto-nat"/>
      <param name="rtp-port-min" value="16384"/>
      <param name="rtp-port-max" value="32768"/>
      <!-- Timer settings -->
      <param name="timer-name" value="soft"/>
      <!-- Codec settings especiais para call center -->
      <param name="codec-prefs" value="OPUS,G722,PCMU,PCMA"/>
      <param name="inbound-codec-prefs" value="OPUS,G722,PCMU,PCMA"/>
      <param name="inbound-codec-negotiation" value="generous"/>
      <!-- VAD settings -->
      <param name="enable-vad" value="true"/>
      <!-- Call Center specific settings -->
      <param name="enable-callcenter" value="true"/>
      <param name="enable-recording" value="true"/>
      <param name="auto-record" value="true"/>
      <!-- Presence settings -->
      <param name="enable-presence" value="true"/>
      <!-- Agent status broadcasting -->
      <param name="agent-status-broadcast" value="true"/>
      <!-- Recording settings -->
      <param name="record-template" value="$${recordings_dir}/${domain_name}/callcenter/${strftime(%Y-%m-%d-%H-%M-%S)}_${queue_name}_${agent_name}_${uuid}.wav"/>
      <!-- Quality settings para call center -->
      <param name="jitterbuffer-msec" value="20:120"/>
      <param name="rtp-timeout-sec" value="300"/>
      <param name="rtp-hold-timeout-sec" value="1800"/>
    </profile>
  </profiles>
</configuration>
